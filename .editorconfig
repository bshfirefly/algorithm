root = true


# --- [1] 全局默认 (适用于所有文件) -----------------------------------
#
# 这些是项目的“基础”规则。
# 我们默认采用现代 Web/JS/TS 项目的风格 (2 空格, 100 行长)。
[*]
end_of_line = lf
charset = utf-8
insert_final_newline = true
trim_trailing_whitespace = true
indent_style = space
indent_size = 2

# 关键：tab_width 应始终等于 indent_size
# 这可以防止当有人意外按下 Tab 键时，产生混合缩进。
tab_width = 2

# 设置一个合理的现代行长 (100)
# 80 太短，120 太长。
max_line_length = 100


# --- [2] 代码覆盖：Python (PEP 8) ------------------------------------
#
# 覆盖全局的 2 空格规则，以遵循 Python 的 PEP 8 规范。
[*.py]
indent_style = space
indent_size = 4
tab_width = 4
# 覆盖全局的 100 行长，以匹配 "Black" 格式化工具的默认值 88。
max_line_length = 88


# --- [3] 文档覆盖：Markdown (最关键的覆盖) ---------------------------
#
# 覆盖全局规则以保护 Markdown 语法。
[*.{md,mdx,txt}]
# [!!!] 最关键的规则 [!!!]
# 禁用行尾空格修剪。
# 原因：Markdown 语法中，行尾的两个空格用于创建硬换行 (<br>)。
# 如果设为 true，自动格式化会删除这些空格，导致换行失效。
trim_trailing_whitespace = false

# 覆盖：Markdown 中的列表使用 4 空格更易读。
indent_style = space
indent_size = 4
tab_width = 4

# 覆盖：纯文本/散文不应在编辑器级别限制行长。
# 让 Prettier 等格式化工具的 "proseWrap" 选项去处理它。
max_line_length = off


# --- [4] 构建与脚本覆盖 ----------------------------------------------

# Shell 脚本和 Dockerfile 通常使用 4 空格
[*.{sh,bash,zsh,fish,conf}, Dockerfile]
indent_style = space
indent_size = 4
tab_width = 4

# [!!!] Makefiles 必须使用 Tab [!!!]
# 这是 EditorConfig 最重要的规则之一，否则 make 会失败。
[Makefile]
indent_style = tab


# --- [5] 数据与配置格式覆盖 -----------------------------------------

# YAML 和 JSON 对缩进敏感，社区标准是 2 空格。
[*.{yml,yaml,json}]
indent_style = space
indent_size = 2
tab_width = 2

# 其他配置格式（如 XML, TOML）使用 4 空格更易读。
[*.{xml,toml,ini,cfg,properties}]
indent_style = space
indent_size = 4
tab_width = 4

# ========================================================================
# 文件结束
# ========================================================================
